<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Force Gym</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      html {
        scroll-behavior: smooth;
      }
    </style>
  </head>
  <body>
    <div id="profileButton" class="profile-button" style="display: none">
      <span id="profileInitial"></span>
    </div>
    <div id="authButtons" class="auth-buttons" style="display: none">
      <button onclick="location.href='/compte'">Sign Up</button>
      <button onclick="location.href='/inscri'">Login</button>
    </div>
    <div id="welcomePopup" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Bienvenue!</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p id="welcomeMessage">Bienvenue à Force Gym!</p>
          </div>
        </div>
      </div>
    </div>
    <div id="profileMenu" class="profile-menu">
      <a href="/profile">Profil</a>
      <button id="logoutBtn">Se déconnecter</button>
    </div>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid justify-content-center">
          <a class="navbar-brand" href="/">Force Gym</a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item"><a class="nav-link" href="/">Accueil</a></li>
              <li class="nav-item">
                <a class="nav-link" href="/espace">Nos Espaces</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/activite">Activités</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/tarif">Tarifs</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/planning">Planning</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/contact">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <section class="hero">
      <div class="overlay">
        <div class="content">
          <h1 style="color: white">Bienvenue à Force Gym</h1>
          <p style="color: white">Salle de sport et de Fitness</p>
          <div class="buttons">
            <a href="#salle" class="btn">La Salle</a>
            <a href="/contact" class="btn">Contact</a>
          </div>
        </div>
      </div>
    </section>

    <section id="salle" class="yellow-section">
      <p>Nos offres sont bien étudiées</p>
      <a href="/tarif" class="btn">Nos Tarifs</a>
    </section>

    <section class="content-section">
      <div class="container">
        <div class="content-text">
          <h2>Force Gym</h2>
          <p>
            Profitez d'un cadre agréable, des espaces aérés et climatisés, des
            équipements de pointe et des coachs qualifiés pour vous encadrer,
            vous motiver et vous soutenir. Force Gym est une salle de sport et
            de fitness qui vous propose des cours variés dans un espace de
            Fitness destiné aux adultes, ados et enfants. Vous trouverez tous ce
            qu'il vous faut dans nos espaces de musculation et Cardio Training
            avec un matériel de qualité.
          </p>
        </div>
        <div class="content-image">
          <img src="/images/gym.jpg" alt="Force Gym" />
        </div>
      </div>
    </section>

    <section class="yellow-section">
      <h2>Nos Espaces</h2>
      <div class="spaces">
        <div class="space">
          <h3>Musculation</h3>
          <p>
            Suivez nos parcours d’exercices pour se muscler, se raffermir, se
            sculpter, développer sa force en ciblant aussi bien le haut que le
            bas du corps. La musculation a l’avantage de dessiner les zones du
            corps et de cibler les muscles grâce à des mouvements adaptés.
          </p>
        </div>
        <div class="space">
          <h3>Cardio-training</h3>
          <p>
            Le cardio training regroupe l’ensemble des disciplines mettant à
            contribution l’appareil cardio respiratoire. Profitez de notre
            espace pour améliorer votre condition physique, le souffle, la
            récupération, faciliter la perte de poids et brûler des graisses.
          </p>
        </div>
        <div class="space">
          <h3>Espace-Fitness</h3>
          <p>
            Profitez de notre espace de Fitness. Vous vouliez transpirer,
            danser, vous affiner, vous muscler, vous défouler, vous détendre, il
            y en a pour tous les goûts, tous les besoins et toutes les envies.
            Trouvez encore plus de détails dans notre planning des cours
          </p>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="container">
        <div class="contact">
          <h3>Contactez Nous</h3>
          <hr class="underline" />
          <ul>
            <li>
              <i class="fas fa-map-marker-alt"></i> Av .20 Mars 1956 Sidi
              Alouane Mahdia
            </li>
            <li><i class="fas fa-phone"></i> Tél : 71 905 378</li>
            <li><i class="fas fa-mobile-alt"></i> Mobile : 52 819 316</li>
            <li>
              <i class="fas fa-envelope"></i>
              <a href="mailto:contact@example.com">Contact</a>
            </li>
            <li><i class="fab fa-facebook"></i> <a href="#">Facebook</a></li>
            <li><i class="fab fa-youtube"></i> <a href="#">YouTube</a></li>
          </ul>
        </div>

        <div class="hours">
          <div>
            <h3>Horaires</h3>
            <hr class="underline" />
            <ul>
              <li><i class="fas fa-clock"></i> Lundi : 06:30 – 21:30</li>
              <li><i class="fas fa-clock"></i> Mardi : 06:30 – 21:30</li>
              <li><i class="fas fa-clock"></i> Mercredi : 06:30 – 21:30</li>
              <li><i class="fas fa-clock"></i> Jeudi : 06:30 – 21:30</li>
              <li><i class="fas fa-clock"></i> Vendredi : 06:30 – 21:30</li>
              <li><i class="fas fa-clock"></i> Samedi : 08:00 – 16:00</li>
              <li><i class="fas fa-clock"></i> Dimanche : 08:00 – 16:00</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>Copyright © 2025 Force Gym. <span>Powered by Gym Connect</span></p>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        const profileButton = document.getElementById("profileButton");
        const profileInitial = document.getElementById("profileInitial");
        const authButtons = document.getElementById("authButtons");
        const profileMenu = document.getElementById("profileMenu");
        const logoutBtn = document.getElementById("logoutBtn");
        const welcomeMessage = document.getElementById("welcomeMessage");
        const connected = localStorage.getItem("connected") === "true";

        if (connected) {
          const currentUserId = localStorage.getItem("current_user_id");

          try {
            const response = await fetch(`http://localhost:3000/user/${currentUserId}`);
            if (response.ok) {
              const user = await response.json();
              profileInitial.textContent = user.username.charAt(0).toUpperCase();
              welcomeMessage.textContent = `Bienvenue à Force Gym, ${user.username}!`;
            } else {
              console.error('Failed to fetch user data');
            }
          } catch (error) {
            console.error('Error fetching user data:', error);
          }

          profileButton.style.display = "flex";
          authButtons.style.display = "none";
        } else {
          profileButton.style.display = "none";
          authButtons.style.display = "flex";
        }

        profileButton.addEventListener("click", function () {
          profileMenu.style.display =
            profileMenu.style.display === "none" ? "flex" : "none";
        });

        logoutBtn.addEventListener("click", function () {
          localStorage.removeItem("current_user_id");
          localStorage.setItem("connected", "false");
          window.location.href = "/";
        });

        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get("welcome") === "true") {
          $("#welcomePopup").modal("show");
          setTimeout(() => {
            $("#welcomePopup").modal("hide");
          }, 3000);
        }
      });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>